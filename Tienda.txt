

///////////////////
//FUNCIONALIDADES//
///////////////////

USUARIOS


Buscar usuario por login y pw -> 'login'
-anonimo

Existe un usuario con este login? -> si/no
-anonimo

Alta usuario de tipo cliente
-anonimo

Modificar usuario
-hay que estar autenticado
-cliente: solo se puede modificar a si mismo
-admin:puede modificar a cualquiera

Baja usuario
-hay que estar autenticado
-cliente: solo se puede borrar a si mismo
-admin:puede borrar a cualquiera

Listar usuarios 
-hay que estar autenticado
-solo admin


PRODUCTOS

-listar productos filtrandolos por un criterio
	-hay que estar autenticado
	-por nombre, entre dos precios, categoria, fabricante 
	
-buscar un producto por su id
	-hay que estar autenticado
	
-insertar producto
	-hay que ser admin
	
-modificar producto
	-hay que ser admin
	
-borrar producto
	-hay que ser admin
	

////////
//APIS//
////////


Autenticacion

POST   /login
-------------
{
  login : aaa
  pw    : bbb
}  

Api REST de usuarios

Metodo	Ruta	          Body    Respuesta Funcionalidad 

GET     /usuarios                 {json}    listar usuarios
GET     /usuarios/:id             {json}    buscar usuario
GET	/usuarios?login=X -       {si/no}   login repetido
POST	/usuarios         {json}  {json}    alta de usuario
PUT     /usuarios/:id     {json}  {json}    modificar usuario
DELETE  /usuarios/:id     -	  -         baja usuario
 

Api REST de productos

Metodo	Ruta	           Body    Respuesta Funcionalidad 

GET     /productos                 {json}    listar productos
GET     /productos/:id             {json}    buscar producto
POST	/productos         {json}  {json}    insertar producto
PUT     /productos/:id     {json}  {json}    modificar producto
DELETE  /productos/:id      -	  -          borrar producto


/////////////////
//BASE DE DATOS//
/////////////////


usuarios
productos
pedidos
facturas


Usuarios
[{
	_id       :
	nombre    : 
	login     :
	pw        :
	direccion :
	telefono  : 
	correoE   :
	spm       :
	...
}]

Productos
[{
	_id         :
	nombre      :
	categoria   :
	fabricante  :
	descripcion :
	imagen      :
	precio      :
	existencias :
}]

Pedidos
[{
	_id      : 
	codigo   :
	fecha    :
	estado   :
	total    : 150
	
	usuario  : {
		todo menos el PW
	}
	
	detalles : 
		[
		{
			cantidad : 0
			precio   : 0
			
			Opción #1 solo el id (adios rendimiento)
			producto : _id

			Opcion #2 empotrar un documento con un subconjunto de las propiedades del producto
			producto : {
				_id
				nombre
			}
			
			Opcion #3 empotrar el documento producto entero
			producto : {
				_id	    :
				nombre      :
				fabricante  :
				descripcion :
				imagen      :
				precio      :
				existencias :			
			}
		
		}	
		]
}]









